<div class="pb-2 mt-6 mb-2 border-b pb-4">
  <h3 class="text-2xl"><%= fa_icon 'search' %> Audit des modifications</h3>
</div>

<div class='bs-container mx-auto sm:px-4 max-w-full'>
  <%= form_tag request.path, method: :get do %>
    <div class="flex flex-wrap">

      <div class="sm:w-1/6 px-4">
        <%= label_tag :start_date, "Du" %>    
        <%= text_field_tag :start_date, params[:start_date], type:'date', class:"input input-bordered input-sm w-full" %>
      </div>

      <div class="sm:w-1/6 px-4">
        <%= label_tag :end_date, "Au" %>    
        <%= text_field_tag :end_date, params[:end_date], type:'date', class:"input input-bordered input-sm w-full", onchange:'this.form.submit()' %>
      </div>

      <div class="sm:w-1/6 px-4">
        <%= label_tag :role, "RÃ´le" %>
        <%= select_tag :role,
              options_for_select(User.roles, params[:role]), include_blank:true, onchange:'this.form.submit()', class:"input input-bordered input-sm w-full" %>
      </div>

      <div class="sm:w-1/6 px-4">
        <%= label_tag :type, "Type" %>
        <%= select_tag :type,
              options_for_select(@types, params[:type]), include_blank:true, onchange:'this.form.submit()', class:"input input-bordered input-sm w-full" %>
      </div>

      <div class="sm:w-1/12 px-4">
        <%= label_tag :action_name, "Action" %>
        <%= select_tag :action_name,
              options_for_select(@actions, params[:action_name]), include_blank:true, onchange:'this.form.submit()', class:"input input-bordered input-sm w-full" %>
      </div>

      <div class="sm:w-1/5 px-4">
        <%= label_tag :search, "Rechercher" %>
        <div class="join w-full">       
          <%= text_field_tag :search, params[:search], class:"input input-bordered input-sm w-full join-item" %>
          <%= submit_tag 'GO', class:"btn btn-success text-white btn-sm join-item" %>
          <%# submit_tag 'Exporter', class:"btn btn-ghost join-item" %>
        </div>
      </div>

      <% if params[:start_date].present? && params[:end_date].present? && params[:type] == 'Cour' %>
        <div class="sm:w-2/5 px-4">
          <br>
          <%= check_box_tag :chgt_salle, 1, params[:chgt_salle], onchange:'this.form.submit()' %>
          <%= label_tag :chgt_salle, "Ne voir que les changements de salle ?" %>
        </div>
      <% end %>    
    </div>
  <% end %>
</div>

<div class="overflow-x-auto">
  <table class="table table-bordered table-sm">
      <thead>
          <tr>
              <th>Date</th>
              <th>Utilisateur</th>            
              <th>Type</th>
              <th>Id</th>
              <th>Action</th>
              <th>Modifications</th>
          </tr>
      </thead>

      <%= render partial: 'audit', collection: @audits %>

  </table>
</div>

<div class="page_info">
  <%= page_entries_info @audits %>
</div>

<div class="planning_pagination">
  <%= will_paginate @audits %>
</div>
