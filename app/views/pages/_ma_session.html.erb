<div class="card shadow-sm p-2 mb-4" style="border-left:6px; border-left-style:solid; border-left-color:<%= cour.formation.color %>;">
  <div class="d-flex mb-2">
    <% if cour.intervenant.photo.present? %>
      <%= image_tag cour.intervenant.photo, class:"border rounded mr-3", width: 75, height: 75 %>
    <% else %>
      <%= image_tag 'planning_intervenant.jpg', class:"border rounded mr-3", width: 75, height: 75 %>
    <% end %>
    <div class="w-100">
      <div class="d-flex justify-content-between">
        <p class="mb-0 font-weight-bold"><%= cour.intervenant.nom_prenom %></p>
        <p class="mb-0">
          <span class="badge badge-pill badge-<%= cour.style %>">
            <%= cour.salle.nom %>
          </span>
        </p>
      </div>
      <p class="mb-0"><%= cour.formation.nom %></p>
      <p class="mb-0"><%= cour.nom_ou_ue %></p>
      <p class="mb-0"><b><%= l(cour.debut, format: :heures_min) %></b> - <%= l(cour.fin, format: :heures_min) %></p>
    </div>
  </div>
  <div class="progress mt-2" style="width: 100%">
    <div class="progress-bar bg-warning" 
        role="progressbar" aria-valuemin="0" aria-valuemax="100" 
        style="width: <%= cour.progress_bar_pct3 %>%; opacity: 0.3;">
    </div>
  </div>

  <% if current_user.étudiant? && presence = cour.presences.find_by(etudiant_id: @etudiant.id) %>
    <div class="alert alert-success mt-3" role="alert">
      Présence signée à <%= l presence.created_at, format: :heures_log %>
    </div>
  <% else %>
    <% if action_name == 'mes_sessions' %>
      <% if (0..30).include?(cour.progress_bar_pct3) && cour.presences.where(etudiant_id: @etudiant.id).empty? %>
        <%= link_to 'Signer la feuille de présence', signature_path(cour_id: cour.id), class: 'btn btn-warning btn-lg mt-4' %>
      <% elsif cour.progress_bar_pct3 > 100 %>
        <p>Pas signé</p>
      <% end %>
    <% end %>
  <% end %>
</div>