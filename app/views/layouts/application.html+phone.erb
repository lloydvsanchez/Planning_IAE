<!DOCTYPE html>
<html lang="fr">
    <head>
        <title><%= @sitename %></title>
        <meta name="description" content="Planning des cours de l'IAE de Paris">
        <%= csrf_meta_tags %>
        <%= csp_meta_tag %>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=300, initial-scale=1">

        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="manifest" href="/manifest.json">

        <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

        <%= stylesheet_pack_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
        <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>  

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-89540844-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-89540844-1');
        </script>

        <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
    </head>

    <body>
        <nav class="navbar bg-light mb-3">
            <a class="navbar-brand" href="/">
                <%= image_tag('logo_iae@195.png', height: 40, alt: 'logo IAE') %>
            </a>

            <!-- Toggler/collapsibe Button -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar" aria-label="menu">
                <%= fa_icon 'bars' %>
            </button>

            <!-- Navbar links -->
            <div class="collapse navbar-collapse" id="collapsibleNavbar">
                <ul class="navbar-nav">
                    <% if user_signed_in? %> 
                        <% if current_user.étudiant? %>
                            <%= navbar_nav_item('ma journée', 'calendar-day', mes_sessions_etudiant_path) %>
                        <% end%>
                        <% if current_user.intervenant? %>
                            <%= navbar_nav_item('ma journée', 'calendar-day', mes_sessions_intervenant_path) %>
                        <% end %>
                        <%= navbar_nav_item('cours', 'calendar-alt', cours_path, 'Planning') %>
                        <% unless current_user.étudiant? %>
                            <%= navbar_nav_item('salles', 'chalkboard', occupation_salles_path) %>
                        <% end %>
                        <li class="nav-item">
                            <%= link_to destroy_user_session_path, method: :delete, class: "nav-link text-dark" do %><i class="fas fa-fw fa-sign-out-alt"></i></span> Déconnexion<% end %> 
                        </li>
                    <% else %>
                        <%= navbar_nav_item('Se connecter', 'sign-in-alt', new_user_session_path) %>
                    <% end %>
                </ul>
            </div>
        </nav>

        <div class="container">
            <% flash.each do |name, msg| %>
                <%= content_tag :div, class: "alert mt-3 alert-#{ (name == "alert" || name == "error") ? "danger" : "success" } alert-dismissable", role: "alert" do %>
                    <button type="button" class="close" data-dismiss="alert" aria-label="bouton du menu"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <%= msg.to_s.html_safe %>
                <% end %>
            <% end %>
            <%= yield %>
        </div>
    </body>
</html>
